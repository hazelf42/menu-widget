(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{331:function(module,exports,__webpack_require__){__webpack_require__(332),__webpack_require__(490),module.exports=__webpack_require__(491)},399:function(module,exports){},491:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(42),__webpack_require__(43),__webpack_require__(26),__webpack_require__(24),__webpack_require__(31);var _storybook_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(148),req=__webpack_require__(687);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_5__.configure)((function loadStories(){req.keys().forEach((function(filename){return req(filename)}))}),module)}.call(this,__webpack_require__(492)(module))},687:function(module,exports,__webpack_require__){var map={"./index.stories.js":716};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=687},716:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),client=__webpack_require__(148),slicedToArray=__webpack_require__(81),slicedToArray_default=__webpack_require__.n(slicedToArray),prop_types=(__webpack_require__(72),__webpack_require__(44),__webpack_require__(59),__webpack_require__(91),__webpack_require__(26),__webpack_require__(24),__webpack_require__(31),__webpack_require__(6)),prop_types_default=__webpack_require__.n(prop_types),axios=__webpack_require__(319),axios_default=__webpack_require__.n(axios),TextField=__webpack_require__(746);__webpack_require__(42),__webpack_require__(43),__webpack_require__(30),__webpack_require__(37),__webpack_require__(107);function filteredDishes(dishes,filter){var filtered=[];return dishes.map((function(d){var _d$dietary;d=function toDish(d){var _d,_d$name,_d2,_d2$price,_d3,_d3$description,_d4,_d4$imageUrl,_d5,_d5$dietary,_d5$dietary$mapValue,_d6,_d6$dietary,_d6$dietary$mapValue,dish={};d=d.mapValue.fields,dish.name=null===(_d=d)||void 0===_d||null===(_d$name=_d.name)||void 0===_d$name?void 0:_d$name.stringValue,dish.price=null===(_d2=d)||void 0===_d2||null===(_d2$price=_d2.price)||void 0===_d2$price?void 0:_d2$price.stringValue,dish.description=null===(_d3=d)||void 0===_d3||null===(_d3$description=_d3.description)||void 0===_d3$description?void 0:_d3$description.stringValue,dish.imageUrl=null===(_d4=d)||void 0===_d4||null===(_d4$imageUrl=_d4.imageUrl)||void 0===_d4$imageUrl?void 0:_d4$imageUrl.stringValue,null!==(_d5=d)&&void 0!==_d5&&null!==(_d5$dietary=_d5.dietary)&&void 0!==_d5$dietary&&null!==(_d5$dietary$mapValue=_d5$dietary.mapValue)&&void 0!==_d5$dietary$mapValue&&_d5$dietary$mapValue.fields&&(dish.dietary={},Object.entries(null===(_d6=d)||void 0===_d6||null===(_d6$dietary=_d6.dietary)||void 0===_d6$dietary||null===(_d6$dietary$mapValue=_d6$dietary.mapValue)||void 0===_d6$dietary$mapValue?void 0:_d6$dietary$mapValue.fields).forEach((function(a){dish.dietary[a[0]]=a[1].integerValue})));return dish}(d),(null==filter||0<(null===(_d$dietary=d.dietary)||void 0===_d$dietary?void 0:_d$dietary[filter]))&&filtered.push(d)})),filtered}var DietTag=function(_ref){var id=_ref.id,onRequest=_ref.onRequest,dietary={vegan:{name:"Vegan",color:"green"},vegetarian:{name:"Vegetarian",color:"orange"},gf:{name:"Gluten-Friendly",color:"yellow"}}[id];return react_default.a.createElement("div",{className:"dietTag",style:{opacity:onRequest?.6:1,flexDirection:"row",backgroundColor:"#ccc"}},react_default.a.createElement("div",{style:{width:5}})," ",null==dietary?void 0:dietary.name," ",onRequest&&"on request")};DietTag.displayName="DietTag";var _div,dishitem_DietTag=DietTag,DishItem=function(_ref){var dish=_ref.dish;return react_default.a.createElement("div",{style:{width:"33%",minWidth:300}},react_default.a.createElement("div",{className:"DishItemContainer"},react_default.a.createElement("div",{className:"DishItemHeader"},react_default.a.createElement("div",{className:"DishHeaderText"},react_default.a.createElement("div",{className:"Row"},dish.imageUrl&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("img",{src:dish.imageUrl,alt:dish.name,className:"DishImage"}),react_default.a.createElement("div",{style:{width:10}})),react_default.a.createElement("h5",{style:{maxWidth:dish.imageUrl?150:"auto"}},dish.name)),react_default.a.createElement("div",{style:{width:"10px"}}),!dish.imageUrl&&react_default.a.createElement("p",{className:"price"},dish.price)),react_default.a.createElement("div",{className:"DietaryContainer"},dish.imageUrl&&react_default.a.createElement("p",{className:"price"},dish.price),!!dish.dietary&&Object.entries(dish.dietary).map((function(d){return"vegetarian"==d[0]&&d[1]==dish.dietary.vegan?react_default.a.createElement("div",{key:d[0]}):1==d[1]?react_default.a.createElement(dishitem_DietTag,{id:d[0],onRequest:!0,key:d[0]}):2==d[1]?react_default.a.createElement(dishitem_DietTag,{id:d[0],onRequest:!1,key:d[0]}):react_default.a.createElement("div",{key:d[0]})})))),react_default.a.createElement("p",null,dish.description)),_div||(_div=react_default.a.createElement("div",{className:"BottomBorder"})))};DishItem.displayName="DishItem",DishItem.__docgenInfo={description:"",methods:[],displayName:"DishItem"};var dishitem=DishItem;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/dishitem/dishitem.js"]={name:"DishItem",docgenInfo:DishItem.__docgenInfo,path:"src/components/dishitem/dishitem.js"});var DietFilter=function(_ref){var id=_ref.id,selected=_ref.selected,onPress=_ref.onPress,dietary={vegan:{name:"Vegan"},vegetarian:{name:"Vegetarian"},gf:{name:"Gluten-Friendly"}}[id];return react_default.a.createElement("div",{className:"dietTag",style:{opacity:selected?1:.6,flexDirection:"row",backgroundColor:"#ccc"},onClick:function onClick(){console.log("Hi"),onPress(selected?null:id)}},react_default.a.createElement("div",{style:{width:5}})," ",null==dietary?void 0:dietary.name)};DietFilter.displayName="DietFilter";var _FaArrowCircleLeft,Categories_div,_FaArrowCircleRight,dishitem_DietFilter=DietFilter,Button=__webpack_require__(747),index_esm=__webpack_require__(200),CategoriesMenu=function(_ref){var rData=_ref.rData,currentCategory=_ref.currentCategory,setCurrentCategory=_ref.setCurrentCategory,filterBy=_ref.filterBy,_useState=Object(react.useState)(0),_useState2=slicedToArray_default()(_useState,2),catScrollPos=_useState2[0],setCatScrollPos=_useState2[1],scrollRef=Object(react.useRef)(),categories=rData.categories.mapValue.fields;return react_default.a.createElement("div",{className:"CategoriesWrapper"},react_default.a.createElement("button",{className:"Invisibutton",style:{textDecoration:"underline"},onClick:function onClick(){var newX=catScrollPos-window.innerWidth+.4*window.innerWidth;scrollRef.current.scroll(newX,0),setCatScrollPos(0<newX?newX:0)}},_FaArrowCircleLeft||(_FaArrowCircleLeft=react_default.a.createElement(index_esm.a,null))),react_default.a.createElement("div",{className:"CategoriesSection",ref:scrollRef},react_default.a.createElement("div",{className:"Scroll"},categories&&Object.values(categories).map((function(f){return 0<filteredDishes(f.mapValue.fields.dishes.arrayValue.values,filterBy).length?react_default.a.createElement(Button.a,{className:"Category",key:f.mapValue.fields.id.stringValue,style:{fontWeight:f.mapValue.fields.id.stringValue==currentCategory?"bold":"normal"},onClick:function onClick(){return setCurrentCategory(f.mapValue.fields.id.stringValue)}},f.mapValue.fields.name.stringValue):Categories_div||(Categories_div=react_default.a.createElement("div",null))})))),react_default.a.createElement("button",{className:"Invisibutton",style:{textDecoration:"underline"},onClick:function onClick(){var newX=catScrollPos+window.innerWidth-.4*window.innerWidth;scrollRef.current.scroll(newX,0),setCatScrollPos(newX)}},_FaArrowCircleRight||(_FaArrowCircleRight=react_default.a.createElement(index_esm.b,null))))};CategoriesMenu.displayName="CategoriesMenu",CategoriesMenu.__docgenInfo={description:"",methods:[],displayName:"CategoriesMenu"};var widget_div,Categories=CategoriesMenu;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/categories/Categories.js"]={name:"CategoriesMenu",docgenInfo:CategoriesMenu.__docgenInfo,path:"src/components/categories/Categories.js"});var Widget=function(_ref){var _rData$categories,_rData$categories$map,restaurantId=_ref.restaurantId,_useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),rData=_useState2[0],setRData=_useState2[1],_useState3=Object(react.useState)(null),_useState4=slicedToArray_default()(_useState3,2),currentCategory=_useState4[0],setCurrentCategory=_useState4[1],_useState5=Object(react.useState)(null),_useState6=slicedToArray_default()(_useState5,2),filterBy=_useState6[0],setFilterBy=_useState6[1],_useState7=Object(react.useState)(""),_useState8=slicedToArray_default()(_useState7,2),searchTerm=_useState8[0],notInitialRender=(_useState8[1],Object(react.useRef)(!1)),categories=null==rData||null===(_rData$categories=rData.categories)||void 0===_rData$categories||null===(_rData$categories$map=_rData$categories.mapValue)||void 0===_rData$categories$map?void 0:_rData$categories$map.fields;return Object(react.useEffect)((function(){if(notInitialRender.current){var y=document.getElementById(currentCategory).getBoundingClientRect().top+window.pageYOffset+-50;window.scrollTo({top:y,behavior:"smooth"})}else null!=currentCategory&&(notInitialRender.current=!0)}),[currentCategory]),Object(react.useEffect)((function(){axios_default.a.get("https://firestore.googleapis.com/v1/projects/menu-buddy-9c09c/databases/(default)/documents/restaurants/".concat(restaurantId)).then((function(a){setRData(a.data.fields);var c=a.data.fields.categories.mapValue.fields;setCurrentCategory(c[Object.keys(c)[0]].mapValue.fields.id.stringValue)})).catch((function(e){alert(null==e?void 0:e.message)}))}),[]),react_default.a.createElement("div",{className:"PageWrapper"},react_default.a.createElement("div",{className:"PageContainer"},react_default.a.createElement("h1",null,rData?rData.name.stringValue:"Loading..."),react_default.a.createElement("div",{className:"Wrap"},react_default.a.createElement(TextField.a,{value:searchTerm,label:"Search",variant:"filled",style:{width:"30vw"}}),react_default.a.createElement(dishitem_DietFilter,{selected:"vegan"==filterBy,id:"vegan",onPress:setFilterBy}),react_default.a.createElement(dishitem_DietFilter,{selected:"vegetarian"==filterBy,id:"vegetarian",onPress:setFilterBy}),react_default.a.createElement(dishitem_DietFilter,{selected:"gf"==filterBy,id:"gf",onPress:setFilterBy}),react_default.a.createElement("button",{className:"Invisibutton",style:{textDecoration:"underline",visibility:null==filterBy?"hidden":"visible"},onClick:function onClick(){return setFilterBy(null)}},"Clear")),rData&&react_default.a.createElement(Categories,{rData:rData,currentCategory:currentCategory,setCurrentCategory:setCurrentCategory,filterBy:filterBy}),rData&&currentCategory&&react_default.a.createElement("div",null,Object.values(categories).map((function(c){var category=c.mapValue.fields,filteredDishArray=filteredDishes(category.dishes.arrayValue.values,filterBy);return 0<filteredDishArray.length?react_default.a.createElement("div",{id:category.id.stringValue},react_default.a.createElement("h2",null,category.name.stringValue),react_default.a.createElement("div",{className:"Wrap",style:{justifyContent:800>window.innerWidth?"center":"flex-start"}},filteredDishArray.map((function(dish){return react_default.a.createElement(dishitem,{dish:dish,key:dish.name})})))):widget_div||(widget_div=react_default.a.createElement("div",null))})))))};Widget.displayName="Widget",Widget.propTypes={restaurantId:prop_types_default.a.string},Widget.defaultProps={restaurantId:"0"};var _Widget,widget=Widget;Object(client.storiesOf)("Widget").add("default",(function(){return _Widget||(_Widget=react_default.a.createElement(widget,null))}))}},[[331,1,2]]]);
//# sourceMappingURL=main.92137c6e394a58eec911.bundle.js.map